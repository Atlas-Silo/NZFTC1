@page
@model NZFTC.Server.Pages.Grievances.TriageModel
@{
    ViewData["PageTitle"] = "Grievance Triage";
}

@section Styles {
    <link rel="stylesheet" href="~/css/grievances.css" asp-append-version="true" />
}

<div class="layout">
    <partial name="_AdminSidebar" />
    
    <div class="main-content">
        <partial name="_Topbar" />
        
        <main class="content">
            <div class="page-header">
                <div class="page-header-left">
                    <h2>Grievance List</h2>
                    <p>View and track submitted grievances for all employees </p>
                </div>
            </div>

           @*
            <div class="filters-section">
                <form method="get">
                    <div class="filters-grid">
                        <div class="filter-group">
                            <label>Search Case/Employee</label>
                            <input type="text" name="search" asp-for="SearchTerm" placeholder="Case ID or employee name...">
                        </div>
                        <div class="filter-group">
                            <label>Status</label>
                            <select name="status" asp-for="StatusFilter">
                                <option value="">All Status</option>
                                <option value="new">New</option>
                                <option value="in-progress">In Progress</option>
                                <option value="resolved">Resolved</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-actions">
                        <button type="submit" class="btn btn-primary">Apply Filters</button>
                        <a asp-page="Triage" class="btn btn-secondary">Clear</a>
                    </div>
                </form>
            </div> *@

           @*Grievances Table *@
            <div class="table-container">
                <div class="table-wrapper">
                    <table class="grievances-table">
                        <thead>
                            <tr>
                                @*<th>Case ID</th>*@
                                <th>Employee</th>
                                <th>Subject</th>
                                <th>Status</th>
                                <th>Submitted</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var grievance in Model.Grievances)
                            {
                                <tr>
                                    @*<td><span class="case-id">@grievance.CaseId</span></td>*@
                                    <td>
                                        <div class="employee-cell">
                                            @*<div class="employee-avatar">@grievance.EmployeeInitials</div>*@
                                            <div class="employee-info">
                                                @*<span class="employee-name">@grievance.EmployeeName</span>*@
                                                <span class="employee-id">@grievance.EmployeeId</span>
                                            </div>
                                        </div>
                                    </td>
                                    <td>@grievance.Subject</td>
                                    <td><span class="badge @grievance.Status.ToLower()">@grievance.Status</span></td>
                                    <td>
                                        @grievance.SubmittedOn.ToString("MMM dd, yyyy")
                                        @*<small class="date-timestamp">@grievance.DaysAgo</small>*@
                                    </td>
                                    <td>
                                        <div class="action-buttons">
                                            <a asp-page="PerCase" asp-route-id="@grievance.Id" class="action-btn view" title="View Details">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                                    <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                                                </svg>
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>

                @* Pagination - Not in DTO *@
                @*<div class="pagination">
                    <div class="pagination-info">Showing @Model.PageStart to @Model.PageEnd of @Model.TotalCount cases</div>
                    <div class="pagination-buttons">
                        <button class="page-btn" @(Model.CurrentPage == 1 ? "disabled" : "")>Previous</button>
                        @for (int i = 1; i <= Model.TotalPages; i++)
                        {
                            <button class="page-btn @(i == Model.CurrentPage ? "active" : "")">@i</button>
                        }
                        <button class="page-btn" @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")>Next</button>
                    </div>
                </div>*@
            </div>
        </main>
    </div>
</div>
